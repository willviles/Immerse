<!DOCTYPE html>
<html>
  <head>
    <title>Immerse Demo (Sections)</title>
    <!-- Dependencies -->
    <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../../bower_components/gsap/src/minified/TweenMax.min.js"></script>
    <!-- iScroll probe required -->
    <script src="../../bower_components/scrollmagic/scrollmagic/minified/ScrollMagic.min.js"></script>
    <script src="../../vendor/js/iscroll-probe.js"></script>
    <!-- Include Immerse.js -->
    <script src="../../dist/min/immerse.min.js"></script>

    <!-- Sections -->
    <script src="js/immerse-setup.js"></script>
    <script src="js/immerse-sections.js"></script>

    <link rel="stylesheet" type="text/css" href="../../style/vendor/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../style/min/immerse.css">
    <link rel="stylesheet" type="text/css" href="../../style/min/demos.css">

    <meta name="viewport" content="user-scalable=no,width=device-width" />
  </head>

  <body class="imm-demo-sections">

    <header id="header" class="imm-section">
      <div class="imm-video" data-imm-video="sun"></div>
      </div>
      <div class="container-fluid">
        <div class="row text-center">
          <h1>HEADER</h1>
          <p>An animation for the header</p>
        </div>
      </div>
    </header>

    <section id="section-1" class="imm-section">
      <div class="container-fluid">
        <div class="row text-center">
          <h1>SECTION 1</h1>
          <p>An animation for section 1</p>
        </div>
      </div>
    </section>

    <section id="section-2" class="imm-section">
      <div class="container-fluid">
        <div class="row text-center">
          <h1>SECTION 2</h1>
          <p>An animation for section 2</p>
        </div>
      </div>
    </section>

    <section id="section-3" class="imm-section">
      <div class="container-fluid">
        <div class="row text-center">
          <h1>SECTION 3</h1>
          <p>An animation for section 3</p>
        </div>
      </div>
    </section>

    <section id="section-4" class="imm-section">
      <div class="container-fluid">
        <div class="row text-center">
          <h1>SECTION 4</h1>
          <p>An animation for section 4</p>
        </div>
      </div>
    </section>

    <nav class="imm-nav">
      <button class="imm-mute"></button>
      <ul class="imm-nav-list"></ul>
    </nav>

    <script type="text/javascript">



      $(document).ready(function() {

        // Setup a page
        ///////////////////////////////////////////

        var pageName = $.Immerse.page.setup({

          // Options
          options: {
            // Set a default for the updateNav value. Any section can change it.
            updateNav: true,
            muteButton: {
              unmuted: '<i class="fa fa-volume-up"></i> On',
              muted: '<i class="fa fa-volume-off"></i> Off',
            }
          },

          // Assets to preload
          assets: {
            'gnossienne': { type: 'audio', path: 'assets/audio/gnossienne', loop: true, wait: true },
            'city': { type: 'audio', path: 'assets/audio/city', loop: true },
            'sun': { type: 'video', path: 'assets/video/sun', loop: true, position: '50% 50%',  }
/*
            audioName2: { type: 'audio', path: 'filepath', wait: true },
            video: { type: 'video', path: 'filepath', wait: true },
            video2: { type: 'video', path: 'filepath', wait: false }
*/
          }
        });

        // Setup Header
        ///////////////////////////////////////////

        $.Immerse.section.setup(pageName, {

          // Unique name for the section
          name: 'Header',
          // Name to be printed as a string
          hideFromNav: true,
          // Set the element. Must be able to take either a string, javascript or jquery selector
          element: $('#header'),
          // Define starting audio
          audio: {
            'gnossienne': { volume: 1, changeDuration: 1 } // Audio #1
          },
          // Define animations
          animations: {
            // Animation #1
            'headerInitAnimation': {
              devices: ['desktop'], // default all
              runtime: ['init', 'enteredUp'], // Default enteringDown, enteringUp
              reset: ['exitedDown'], // Default exitedDown, exitedUp
//               delay: 1,
              timeline: function(s) {
                return [
                  TweenMax.from(s.find('h1'), 2, {
                    opacity: 0, x: -70, delay: .5, ease: Elastic.easeOut.config(1, 0.3)
                  }),
                  TweenMax.from(s.find('p'), 2, {
                    opacity: 0, x: -40, delay: 1, ease: Elastic.easeOut.config(1, 0.3)
                  })
                ]
              }
            }
          }
        });

        // Setup #section-1
        ///////////////////////////////////////////

        $.Immerse.section.setup(pageName, {

          // Unique name for the section
          name: 'Section 1',
          // Set the element. Must be able to take either a string, javascript or jquery selector
          element: $('#section-1'),
          // Define audio
          audio: {
            'gnossienne': { volume: 1, changeDuration: 1 } // Audio #1
          },
          // Define animations
          animations: {
            // Animation #1
            'section1Animation': {
              devices: ['desktop'], // default all
              orientation: ['portrait', 'landscape'],
              runtime: ['enteredDown', 'enteredUp'], // Default enteringDown, enteringUp
              reset: ['exitedDown', 'exitedUp'], // Default exitedDown, exitedUp
              timeline: function(s) {
                return [
                  TweenMax.from(s.find('h1'), 2, {
                    opacity: 0, x: -70, delay: .5, ease: Elastic.easeOut.config(1, 0.3)
                  }),
                  TweenMax.from(s.find('p'), 2, {
                    opacity: 0, x: -40, delay: 1, ease: Elastic.easeOut.config(1, 0.3)
                  })
                ]
              }
            }
          },
          // Define actions
          actions: {
            // Action #1
            'actionName': {
              devices: ['mobile', 'desktop'], // default mobile tablet mdDesktop lgDesktop
              runtime: ['enteringDown'], // enterDown, enterUp, leaveDown, leaveUp
              action: function(s) {
                // Execute custom action to occur at the runtime and on the device type selected
                console.log('Section 1 Action running!');
              }
            }

          },
          // Custom Attributes get changed in the custom attributes dictionary. Fires an observer
          attributes: {
            'logoColor': {
              devices: ['desktop', 'mobile'], // default all
              runtime: ['enteringDown', 'enteringUp'],
              value: 'blue'
            }
          }
        });

        // Setup #section-2
        ///////////////////////////////////////////

        $.Immerse.section.setup(pageName, {

          // Unique name for the section
          uid: 'Section 2',
          // Set the element. Must be able to take either a string, javascript or jquery selector
          element: $('#section-2'),
          // Define audio
          audio: {
            'gnossienne': { volume: .2, changeDuration: 1 }, // Audio #1
            'city': { volume: .1, changeDuration: .5 }
          }
        });

        // Init immerse
        ///////////////////////////////////////////

        var pageImmerse = $.Immerse.init($('body'), pageName);

        $('body').on('logoColor', function(obj, value) {
          console.log('logoColor is ' + value);
        });

      });
    </script>
  </body>
</html>
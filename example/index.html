<!DOCTYPE html>
<html>
  <head>
    <title>Learn To Surf &mdash; Immerse Example</title>
    <!-- Include Dependencies -->
    <script src="../bower_components/jquery/jquery.min.js"></script>
    <script src="../bower_components/gsap/src/minified/TweenMax.min.js"></script>
    <script src="../bower_components/gsap/src/minified/plugins/ScrollToPlugin.min.js"></script>
    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Lato:300,300italic,900,900italic' rel='stylesheet' type='text/css'>
    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Include Immerse.js -->
    <script src="../dist/js/immerse.js"></script>
    <link rel="stylesheet" type="text/css" href="../dist/css/immerse.css">
    <!-- Include Custom Styles -->
    <link rel="stylesheet" type="text/css" href="../example/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../example/style.css">
    <meta name="viewport" content="user-scalable=no,width=device-width" />
  </head>

  <body id="imm-demo-sections" class="imm-scroll-container">

    <header id="header" class="imm-fullscreen imm-section">
      <div class="imm-video" data-imm-video="surf"></div>
      <div class="imm-vertcenter">
        <div class="container-fluid">
          <div class="row text-center">
            <h1 class="title">Learn <span class="yellow-text">to surf.</span></h1>
            <h4 class="subtitle body-font">A super simple Immerse.js example page.</h4>
          </div>
          <div class="buttons row">
            <div class="col-sm-3 col-sm-offset-3">
              <button data-imm-modal-open="https://www.youtube.com/watch?v=7RYzCWWZpBA" class="button fullwidth">
                <span>Watch Video <i class="fa fa-play-circle right"></i></span>
              </button>
            </div>
            <div class="col-sm-3">
              <button data-imm-scroll-to="boards" class="button fullwidth">
                <span><i class="fa fa-angle-down"></i> Let's Go</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <section id="boards" class="imm-fullscreen imm-section">
      <div class="imm-vertcenter">
        <div class="container-fluid">
          <div class="row text-center">
            <h3><span class="yellow-text">Grab a</span> board.</h3>
            <p>
              <button data-imm-scroll-to="tutors" class="button">
                <span><i class="fa fa-angle-down"></i> Next</span>
              </button>
            </p>
          </div>
        </div>
      </div>

      <div class="example-boards">
        <div class="container">
          <ul class="row">
            <li class="col-sm-4">
              <button data-imm-modal-open="board-one">
                Board One
              </button>
            </li>
            <li class="col-sm-4">
              <button data-imm-modal-open="board-two">
                Board Two
              </button>
            </li>
            <li class="col-sm-4">
              <button data-imm-modal-open="board-three">
                Board Three
              </button>
            </li>
          </ul>
        </div>
      </div>

      <div data-imm-modal-id="board-one">
        <div class="container-fluid">
          <div class="row text-center">
            <p><button data-imm-modal-action="close">Close</button></p>
            <p><button data-imm-modal-action="cancel">Cancel</button></p>
            <p><button data-imm-modal-action="confirm">Confirm</button></p>
          </div>
          <div class="row">
            <div class="col-xs-4 col-xs-offset-4">
              <h1>Board One</h1>
              <p>Awesome board.</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quae cum praeponunt, ut sit aliqua rerum selectio, naturam videntur sequi; Qui enim existimabit posse se miserum esse beatus non erit. An vero, inquit, quisquam potest probare, quod perceptfum, quod. Quamquam non negatis nos intellegere quid sit voluptas, sed quid ille dicat. Multa sunt dicta ab antiquis de contemnendis ac despiciendis rebus humanis;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Familiares nostros, credo, Sironem dicis et Philodemum, cum optimos viros, tum homines doctissimos.</p>
            </div>
          </div>
        </div>
      </div>

      <div data-imm-modal-id="board-two">
        <div class="container-fluid">
          <div class="row text-center">
            <p><button data-imm-modal-action="close">Close</button></p>
            <p><button data-imm-modal-action="cancel">Cancel</button></p>
            <p><button data-imm-modal-action="confirm">Confirm</button></p>
          </div>
          <div class="row">
            <div class="col-xs-4 col-xs-offset-4">
              <h1>Board Two</h1>
              <p>Awesome board.</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quae cum praeponunt, ut sit aliqua rerum selectio, naturam videntur sequi; Qui enim existimabit posse se miserum esse beatus non erit. An vero, inquit, quisquam potest probare, quod perceptfum, quod. Quamquam non negatis nos intellegere quid sit voluptas, sed quid ille dicat. Multa sunt dicta ab antiquis de contemnendis ac despiciendis rebus humanis;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Familiares nostros, credo, Sironem dicis et Philodemum, cum optimos viros, tum homines doctissimos.</p>
            </div>
          </div>
        </div>
      </div>

      <div data-imm-modal-id="board-three">
        <div class="container-fluid">
          <div class="row text-center">
            <p><button data-imm-modal-action="close">Close</button></p>
            <p><button data-imm-modal-action="cancel">Cancel</button></p>
            <p><button data-imm-modal-action="confirm">Confirm</button></p>
          </div>
          <div class="row">
            <div class="col-xs-4 col-xs-offset-4">
              <h1>Board Three</h1>
              <p>Awesome board.</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quae cum praeponunt, ut sit aliqua rerum selectio, naturam videntur sequi; Qui enim existimabit posse se miserum esse beatus non erit. An vero, inquit, quisquam potest probare, quod perceptfum, quod. Quamquam non negatis nos intellegere quid sit voluptas, sed quid ille dicat. Multa sunt dicta ab antiquis de contemnendis ac despiciendis rebus humanis;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Familiares nostros, credo, Sironem dicis et Philodemum, cum optimos viros, tum homines doctissimos.</p>
            </div>
          </div>
        </div>
      </div>

    </section>

    <section id="tutors" class="imm-fullscreen imm-section">
      <div class="imm-vertcenter">
        <div class="container-fluid">
          <div class="row text-center">
            <h3><span class="white-text">Choose a</span> tutor.</h3>
            <div id="steve-tooltip" class="imm-tooltip-content">A little bio for Steve the surfer.</div>
            <p><span data-imm-tooltip="#steve-tooltip">Steve</span></p>
            <div id="sarah-tooltip" class="imm-tooltip-content">A little bio for Sarah the surfer.</div>
            <p><span data-imm-tooltip="#sarah-tooltip">Sarah</span></p>
          </div>
        </div>
      </div>
    </section>

    <section id="academy" class="imm-section">
      <div class="container-fluid">
        <div class="row text-center">
          <h1>Join the surfing academy.</h1>
          <p>An animation for section 3</p>

        </div>
      </div>
    </section>

    <nav class="side-nav imm-nav">
      <ul class="imm-nav-list"></ul>
    </nav>

    <nav class="top-nav">
      <div><button class="imm-mute"></button></div>
      <div><button class="open-menu"><i class="fa fa-bars"></i></button></div>
    </nav>

    <div class="imm-loading">
      <div class="imm-spinner"></div>
    </div>

    <script type="text/javascript">

      $(document).ready(function() {

        // Setup a page
        ///////////////////////////////////////////

        var pageName = $.Immerse.setup({

          // Options
          options: {
            defaultTransition: {
              type: 'scroll'
            },
            muteButton: {
              unmuted: '<i class="fa fa-volume-up"></i>',
              muted: '<i class="fa fa-volume-off"></i>',
            },
            devMode: true
          },

          // Assets to preload
          assets: {
            'gnossienne': { type: 'audio', path: 'assets/audio/gnossienne', loop: true, wait: true },
            'city': { type: 'audio', path: 'assets/audio/city', loop: true, wait: true },
            'surf': { type: 'video', path: 'assets/video/surf', loop: true, position: '50% 50%' } // can set mute, autoplay, playbackRate
          },

          // Define default audio
          audio: {
            'gnossienne': { volume: 1, changeDuration: 1 } // Audio #1
          },

          // Define component defaults
          components: {
            stacks: {
              option1: 'Default global option'// Allow overriding of component defaults globally
            },
            modals: {
              'default': {
                onCancel: function(modal) {
                  alert('Custom cancel action fired from global settings');
                }
              }
            }
          }
        });


        // Setup Header
        ///////////////////////////////////////////

        pageName.section({

          // Unique name for the section
          name: 'Intro',
          // Set the element. Must be able to take either a string, javascript or jquery selector
          element: $('#header'),
          // Define animations
          animations: {
            // Animation #1
            'init': {
              runtime: ['init', 'enteredUp'], // Default enteringDown, enteringUp
              reset: ['exitedDown'], // Default exitedDown, exitedUp
              delay: .5,
              timeline: function(s) {
                return [
                  TweenMax.from(s.find('.title'), 2, {
                    opacity: 0, x: -70, ease: Elastic.easeOut.config(1, 0.3)
                  }),
                  TweenMax.from(s.find('.subtitle'), 3, {
                    opacity: 0, x: -70, delay: 1, ease: Power4.easeOut
                  }),
                  TweenMax.from(s.find('.buttons'), 3, {
                    opacity: 0, y: 20, delay: 1.25, ease: Power4.easeOut
                  })
                ]
              }
            }
          },
          // Custom Attributes get changed in the custom attributes dictionary. Fires an observer
          attributes: {
            'navColor': {
              value: ''
            }
          },
        });

        // Setup #section-1
        ///////////////////////////////////////////

        pageName.section({
          // Unique name for the section
          name: 'Boards',
          // Set the element. Must be able to take either a string, javascript or jquery selector
          element: $('#boards'),
          // Define animations
          animations: {
            // Animation #1
            'boards': {
              devices: ['desktop'], // default touch & desktop
              breakpoints: ['mobile', 'tablet', 'mdDesktop', 'lgDesktop'],
              runtime: ['enteringDown', 'enteringUp'], // Default enteringDown, enteringUp
              reset: ['exitedDown', 'exitedUp'], // Default exitedDown, exitedUp
              timeline: function(s) {
                return [
                  TweenMax.from(s.find('.example-boards li:nth-of-type(1)'), 2, {
                    opacity: 0, y: -70, delay: .5, ease: Elastic.easeOut.config(1, 0.3)
                  }),
                  TweenMax.from(s.find('.example-boards li:nth-of-type(2)'), 2, {
                    opacity: 0, y: -70, delay: .5, ease: Elastic.easeOut.config(1, 0.3)
                  }),
                  TweenMax.from(s.find('.example-boards li:nth-of-type(3)'), 2, {
                    opacity: 0, y: -70, delay: .5, ease: Elastic.easeOut.config(1, 0.3)
                  })
                ]
              }
            }
          },
          // Custom Attributes get changed in the custom attributes dictionary. Fires an observer
          attributes: {
            'navColor': {
              value: 'grey'
            }
          },
          // Component settings
          components: {
            stacks: {
              option1: 'THIS SHOULD ONLY BE VISIBLE IN BOARDS SECTION'
            },
            modals: {
              'default': {
                onCancel: function(modal) {
                  alert('Custom cancel action fired from section default!');
                }
              },
              'boardOne': {
                onCancel: function(modal) {
                  alert('Custom cancel action fired from boardOne!');
                }
              },
              'boardTwo': {
                onCancel: function(modal) {
                  // This is how you override modal settings
                  alert('Custom cancel action fired from boardTwo!');
                }
              }
            }
          }
        });

        // Setup #section-1
        ///////////////////////////////////////////

        pageName.section({
          // Unique name for the section
          name: 'Tutors',
          // Set the element. Must be able to take either a string, javascript or jquery selector
          element: $('#tutors'),
          // Custom Attributes get changed in the custom attributes dictionary. Fires an observer
          attributes: {
            'navColor': {
              value: 'white-grey'
            }
          }
        });

        // Init immerse instance
        ///////////////////////////////////////////

        pageName.init($('body'));

        // Manipulate Immerse after init
/*
        setTimeout(function() {
          pageName.changeSection('DOWN');
        }, 3000);
*/

/*
        setTimeout(function() {
          if (pageName.audio() === false) {
            pageName.audio('unmute');
          } else if (pageName.audio() === true) {
            pageName.audio('mute');
          }
        }, 3000);
*/

        $('body').on('navColor', function(obj, value) {

          var $navs = $('.side-nav, .top-nav');

          $.each($navs, function(i, nav) {
            var $nav = $(nav),
                currentColor = $nav.data('color');

            $nav.removeClass(currentColor).addClass(value).data('color', value);
          })

          console.log('navColor is ' + value);
        });



      });
    </script>
  </body>
</html>
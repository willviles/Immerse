window.pageNameSetup=Immerse.Setup({options:{fixedScroll:$(window).height(),updateNav:!0},assets:{audioName:{type:"audio",path:"filepath",wait:!0},audioName2:{type:"audio",path:"filepath",wait:!0},video:{type:"video",path:"filepath",wait:!0},video2:{type:"video",path:"filepath",wait:!1}},sections:{}}),window.pageNameSetup.sections.extend({uid:"name",element:"#section-id",audio:{audioName:{volume:.75,changeDuration:1},audioName2:{volume:.75,changeDuration:1}},animations:{animationName:{delay:0,devices:["desktop","mobile"],runtime:["enterDown","enterUp"],timeline:function(o){TweenMax.from(o.find("h1"),2,{opacity:0,x:-70,delay:.25,ease:Elastic.easeOut.config(1,.3)}),TweenMax.from(o.find("div"),2,{opacity:0,x:-40,delay:.25,ease:Elastic.easeOut.config(1,.3)})}},animationName2:{delay:0,devices:["desktop","mobile"],runtime:["leaveDown","leaveUp"],timeline:function(o){TweenMax.from(o.find("p"),2,{opacity:0,x:-70,delay:.25,ease:Elastic.easeOut.config(1,.3)}),TweenMax.from(o.find(".graphic"),2,{opacity:0,x:-40,delay:.25,ease:Elastic.easeOut.config(1,.3)})}}},actions:{actionName:{devices:["desktop","mobile"],runtime:["enterDown"],action:function(o){}},actionName:{devices:["desktop","mobile"],runtime:["enterDown"],action:function(o){}}},customAttributes:{logoColor:"colorName"},updateNav:!1,fixedScroll:0}),$(document).ready(function(){var o=$(".pageNameContainer").Immerse({setup:pageNameSetup});o.on("#{customAttributeName}Change",function(o){console.log("Do something with "+o)}),o.on("sectionChange",function(o){console.log("Change navigation based upon section changing to "+o)}),o.Immerse.toSection("next"),o.Immerse.toSection("prev"),o.Immerse.toSection("sectionName"),o.on("assetsLoaded",function(o){console.log("Required assets loaded. Do something, like perhaps animating in the page?")}),o.on("allAssetsLoaded",function(o){console.log("All assets loaded. Just to let you know.")}),$(".mute-btn").on("click",function(){window.siteAudio("off")}),o.Immerse.info("currentSection"),o.Immerse.info("scrollPos"),o.Immerse.info("pageHeight"),o.Immerse.info("deviceView"),o.Immerse.disableScroll(!0),o.Immerse.disableScroll(!1)}),function($,o,e,n){var i=function(o){this.elem=o,this.$elem=$(o)};i.prototype={init:function(){return this},controllers:{section:function(o){},scroll:{},audio:function(){}},setDeviceView:function(){},resizing:function(){}},$.fn.Immerse=function(){return this.each(function(){new i(this).init()})}}(jQuery,window,document),function($,o,e,n){var i=function(o,e){this.elem=o,this.$elem=$(o)};i.prototype={init:function(){return this.animationController=new ScrollMagic({container:this.$scrollContainer}),Modernizr.touch||(this.pageInitAnimations.call(this),this.controllers.audioController.call(this)),this.controllers.sectionController.call(this,this.sections),Modernizr.touch||(this.controllers.modalController.call(this),this.controllers.scrollController.init.call(this),this.utilities.preloadVideos.call(this)),this.utilities.mobileSupport.call(this,this),this},controllers:{sectionController:function(e){var i=this;$.each(e,function(e,t){e++;var l=$(t.id),a=l.find(".vide").length>0?!0:!1,r=t.swiper!==n?!0:!1,s=t.reveal!==n?!0:!1,c=t.audio!==n?!0:!1,u=t.customScenes!==n?!0:!1,d,f=t.swiper,h=function(){d=new Swiper(t.id+" .swiper-container",f),d.stopAutoplay(),setTimeout(function(){d.startAutoplay()},5e3)},m=function(){d.destroy(),d=null},v=l.find(".vide"),p=function(){$.each(v,function(o,e){var n=$(e).data("video-path"),i=$(e).data("video-options");$(e).vide(n,i)})},g=function(){$.each(v,function(o,e){$(e).data("vide").resize()})},w=function(){$.each(v,function(o,e){$(e).data("vide").destroy()})},C,y=function(){C.play()},S=function(){C.pause(0,!0)};if(s){C=new TimelineMax({paused:!0});var N=t.reveal;revealDelay=N.delay,$sectionContent=l.find(".s-content"),$revealIndicator=l.find(".animation-alert"),revealContentTimeline=N.timeline.call(i,{$section:l,$sectionContent:$sectionContent}),Modernizr.touch||C.add([TweenMax.from(l.find(".reveal"),.5,{width:"100%",ease:Expo.easeInOut,delay:revealDelay}),TweenMax.to($revealIndicator,.5,{opacity:0,x:-50,ease:Expo.easeInOut,delay:revealDelay-.25})]),C.add(revealContentTimeline)}var T=i.$elem.find(".page-audio audio"),x=[],b=function(){if(c){var o=t.audio.call(i);$.each(o[0],function(o,e){x.push(o),i.audioOn||($(o)[0].volume=0),$(o)[0].play(),$(o).data("volume",e.volume),$(o).data("playing",!0);var n=i.audioOn?e.volume:0,t=e.delay?e.delay:0;TweenMax.to($(o),e.changeDuration,{volume:n,ease:Linear.easeNone,delay:t})})}var e=T.not(x.join(","));$.each(e,function(o,e){$(e).data("playing",!1),TweenMax.to($(e),1,{volume:0,ease:Linear.easeNone,onComplete:function(){$(e)[0].pause(),$(e)[0].currentTime=0}})})},O=function(){"white"===t.logoColor?i.$mainNav.addClass("white-logo"):i.$mainNav.removeClass("white-logo")},I=function(){i.$sectionNav.find("li").removeClass("active"),i.$sectionNav.find("li:nth-child("+e+")").addClass("active")},k=new ScrollScene({triggerElement:l,triggerHook:"onEnter",offset:1}).addTo(i.animationController),M=new ScrollScene({triggerElement:l,offset:1}).addTo(i.animationController),A=new ScrollScene({triggerElement:l,triggerHook:"onLeave",offset:$(o).height()-1}).addTo(i.animationController);k.on("enter",function(){Modernizr.touch||(I(),b()),O(),a&&p(),r&&h(),s&&y()}),Modernizr.touch||(k.on("leave",function(){s&&S(),a&&w(),r&&m()}),k.on("progress",function(){a&&g()}),A.on("enter",function(){s&&S(),a&&w(),r&&m()}),A.on("leave",function(){I(),b(),O(),a&&p(),r&&h(),s&&y()}));var D={$section:l,sectionEnterScene:k,sectionExitingScene:M,sectionExitedScene:A};u&&t.customScenes.call(i,D)}),$(".start-again").on("click",function(){i.onInitAnimations.pause(0,!0),i.$scrollContainer.scrollTop(0),setTimeout(function(){i.onInitAnimations.play()},500)})},scrollController:{timer:null,wHeight:$(o).height(),isScrolling:!1,initSectionNav:function(){var o=this;$.each(this.sections,function(e,n){n.addToNav!==!1&&o.$sectionNav.find("ul").append("<li></li>")}),this.$sectionNav.css({marginTop:"-"+o.$sectionNav.height()/2+"px"}),this.$sectionNav.find("li").on("click",function(){var e=$(this).index(),n=$(o.sections[e].id).offset().top,i=o.$scrollContainer.scrollTop()+n;o.$scrollContainer.scrollTop(i)})},doScroll:function(e){var n=$(o).height(),i=this;this.$scrollContainer.animate({scrollTop:e+n+"px"},750,"easeInOutExpo",function(){setTimeout(function(){i.controllers.scrollController.isScrolling=!1},1250)})},handleScroll:function(o){return o.preventDefault(),this.controllers.scrollController.isScrolling===!0?!0:(this.controllers.scrollController.isScrolling=!0,void(o.originalEvent.wheelDelta>=0?this.controllers.scrollController.doScroll.call(this,"-="):this.controllers.scrollController.doScroll.call(this,"+=")))},scrollResizer:function(){var e=$(o).height();if(e==this.controllers.scrollController.wHeight)return!1;var n=this.$scrollContainer.scrollTop(),i=this.controllers.scrollController.wHeight-e,t=n/this.controllers.scrollController.wHeight;this.$scrollContainer.scrollTop(n-i*t),this.controllers.scrollController.wHeight=e},scrollButtonHandler:function(){var o=this.$elem.find("[data-scroll]"),e=this;o.on("click",function(){var o=$(this).attr("data-scroll");e.controllers.scrollController.isScrolling=!0,"next"===o?e.controllers.scrollController.doScroll.call(e,"+="):console.log("Some other scroll button action")})},init:function(){var e=this;this.controllers.scrollController.initSectionNav.call(this),this.$scrollContainer.bind("mousewheel",function(o){e.controllers.scrollController.handleScroll.call(e,o)}),$(o).on("resize",function(){e.controllers.scrollController.scrollResizer.call(e)}),this.controllers.scrollController.scrollButtonHandler.call(this)}},audioController:function(){var e=this.$elem.find(".page-audio audio"),n,i=$(".mute-btn"),t=this,l=function(){$.each(e,function(o,e){TweenMax.to($(e),1,{volume:0,ease:Linear.easeNone})})},a=function(){var o=e.filter(function(){return 1==$(this).data("playing")});$.each(o,function(o,e){var n=$(e).data("volume");TweenMax.to($(e),1,{volume:n,ease:Linear.easeNone})})},r=function(o){i.html("off"===o?'<small><i class="fa fa-volume-off"></i> <span>Audio Off</span></small>':'<small><i class="fa fa-volume-up"></i> <span>Audio On</span></small>')};"false"===$.getCookie("audioOn")?(r("off"),this.audioOn=!1):(r("on"),this.audioOn=!0),$.each(e,function(o,e){$(e).Audiiio()}),$(o).on("blur",function(){return t.audioOn?void l():!1}),$(o).on("focus",function(){return t.audioOn?void a():!1}),i.on("click",function(){t.audioOn?(r("off"),i.html('<small><i class="fa fa-volume-off"></i> <span>Audio Off</span></small>'),l(),$.setCookie("audioOn","false",3650),t.audioOn=!1):(r("on"),a(),$.setCookie("audioOn","true",3650),t.audioOn=!0)})},modalController:function(){var o=$("body").find(".open-modal"),e=$("body").find(".close-modal"),n=this;o.on("click",function(){var o=$(this),e=o.data("modal"),n=$("body").find("#"+e+"-modal");if("video"===e){var i=o.data("video-id");n.append('<div class="video-container"><iframe id="ytplayer" type="text/html" width="100%" height="100%"\n                  src = "http://www.youtube.com/embed/'+i+'?autoplay=1"\n                  frameborder = "0" / > < /div>')}n.fadeIn(500)});var i=function(o){var e=$("body").find("#"+o+"-modal");"video"===o?e.fadeOut(500,function(){e.find(".video-container").remove()}):e.fadeOut(500)};e.on("click",function(){var o=$(this).data("modal");i(o)}),$("#video-modal").on("click",function(){$(this).hasClass("modal")&&i("video")})}},utilities:{preloadVideos:function(){$allVideos=this.$scrollContainer.find(".vide"),$.each($allVideos,function(o,e){var n=$(e).data("video-path"),i=$(e).data("video-options");$(e).vide(n,i);var t=$(e).data("vide").getVideoObject();t.pause(),t.currentTime=0})},mobileSupport:function(o){if(!Modernizr.touch)return!1;var e=new IScroll("#launch-anim-container",{scrollX:!1,scrollY:!0,scrollbars:!0,useTransform:!1,useTransition:!1,probeType:3,click:!0});this.animationController.scrollPos(function(){return-e.y}),e.on("scroll",function(e){o.animationController.update()})}}},$.fn.LaunchAnimations=function(){return this.each(function(){new i(this).init()})}}(jQuery,window,document),$.extend(runScriptOnPageIn,{initLaunchAnimations:function(o){var e=$(window).launchSections;"launch"==o.data("page-slug")&&o.LaunchAnimations(e)}});
//# sourceMappingURL=./immerse.bak.min.js.map
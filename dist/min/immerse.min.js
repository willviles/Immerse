!function($,t,e,i){var s=function(){};s.prototype={setup:function(t){return this.setup=t,this.defaults={preload:{},options:{sectionSelector:".imm-section",updateNav:!0,breakpoints:{mobile:480,tablet:768,mdDesktop:992,lgDesktop:1200}},sections:[]},this.setup=$.extend(this.setup,this.defaults),this},init:function(t,e){this.elem=t,this.$elem=$(t),this.setup=e.setup,this.assets=this.setup.assets,this.sections=[];var i=this;return this.utilities.deviceView.init.call(this),this.utilities.assets.register.call(this,this),this.controllers.scrollMagic=new ScrollMagic.Controller({container:i.$elem.selector}),this.controllers.section.call(this,this),this.controllers.scroll.init.call(this,t),this},controllers:{section:function(t){var e=$(this.setup.options.sectionSelector);$.each(e,function(e,i){var s={};s.updateNav=t.setup.options.updateNav,s.element=$(i),t.sections.push(s)}),$.each(this.setup.sections,function(e,i){var s=$(i.element);$.each(t.sections,function(e,s){t.sections[e]=$(s.element)[0]===$(i.element)[0]?i:s}),t.utilities.scenes.register.call(t,s),$.each(i.animations,function(e,i){t.controllers.animation.call(t,s,e,i)}),$.each(i.actions,function(e,i){t.controllers.action.call(t,s,e,i)}),$.each(i.attributes,function(e,i){t.controllers.attribute.call(t,s,e,i)})}),$.each(this.sections,function(e,i){t.controllers.scroll.scrollOffset.set.call(t,i)}),this.sections.sort(function(t,e){return t.scrollOffset-e.scrollOffset}),console.log(this.sections)},animation:function(t,e,i){var s=new TimelineLite({paused:!0}),n=function(){return i.timeline(t)},o=isNaN(i.delay)?null:i.delay,l,c,r=this;null!==o&&s.set({},{},"+="+o),s.add(n),$.each(i.runtime,function(t,e){l=l+" "+e}),$.each(i.reset,function(t,e){c=c+" "+e});var a=-1!==$.inArray("mobile",i.devices),u=-1!==$.inArray("desktop",i.devices);return a&&!u&&!r.isMobile||u&&!a&&!r.isDesktop?!1:(t.on(l,function(){console.log("Running "+e),s.play()}),void t.on(c,function(){console.log("Resetting "+e),s.pause(0,!0)}))},action:function(t,e,i){var s=i.action,n=isNaN(i.delay)?0:i.delay,o,l=this;$.each(i.runtime,function(t,e){o=o+" "+e});var c=-1!==$.inArray("mobile",i.devices),r=-1!==$.inArray("desktop",i.devices);return c&&!r&&!l.isMobile||r&&!c&&!l.isDesktop?!1:void t.on(o,function(){setTimeout(function(){s.call(l,t)},n)})},attribute:function(t,e,i){var s=i.value,n=isNaN(i.delay)?0:i.delay,o,l=this;$.each(i.runtime,function(t,e){o=o+" "+e});var c=-1!==$.inArray("mobile",i.devices),r=-1!==$.inArray("desktop",i.devices);return c&&!r&&!l.isMobile||r&&!c&&!l.isDesktop?!1:void t.on(o,function(){setTimeout(function(){l.$elem.trigger(e,s)},n)})},scroll:{isScrolling:!1,canScroll:!0,init:function(e){this.scrollContainer=$($(e)[0]===$("body")[0]?t:e);var i=this;this.controllers.scroll.currentSection=this.sections[0],this.scrollContainer.scrollTop(0),this.scrollContainer.bind("mousewheel wheel DOMMouseScroll",function(t){i.controllers.scroll.handler.call(i,t)})},scrollOffset:{set:function(t){t.scrollOffset=$(t.element).offset().top},update:function(){var t=this;$.each(this.sections,function(e,i){t.controllers.scroll.scrollOffset.set.call(t,i)})}},stickToSection:function(){var t=this.controllers.scroll.currentSection.scrollOffset;this.scrollContainer.scrollTop(t)},status:function(i,s){function n(e){e=e||t.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}"enable"===i?(t.removeEventListener&&t.removeEventListener("DOMMouseScroll",n,!1),t.onmousewheel=e.onmousewheel=null,t.onwheel=null,t.ontouchmove=null):"disable"===i&&(t.addEventListener&&t.addEventListener("DOMMouseScroll",n,!1),t.onwheel=n,t.onmousewheel=e.onmousewheel=n,t.ontouchmove=n)},handler:function(t){this.controllers.scroll.status("disable",t),this.controllers.scroll.isScrolling===!1&&this.controllers.scroll.canScroll===!0&&(this.controllers.scroll.isScrolling=!0,t.originalEvent.wheelDelta>=0?this.controllers.scroll.go.call(this,"UP"):this.controllers.scroll.go.call(this,"DOWN"))},go:function(t){var e,s,n=this.sections.indexOf(this.controllers.scroll.currentSection);return that=this,"UP"===t?s=this.sections[n-1]:"DOWN"===t&&(s=this.sections[n+1]),s===i?(that.controllers.scroll.isScrolling=!1,that.controllers.scroll.canScroll=!0,!1):(e=s.scrollOffset,void this.$elem.animate({scrollTop:e},500,function(){setTimeout(function(){that.controllers.scroll.currentSection=s,that.controllers.scroll.isScrolling=!1,that.controllers.scroll.canScroll=!0},1e3)}))}},audio:function(){},navigation:function(){}},utilities:{deviceView:{init:function(){this.windowWidth=$(t).width(),this.windowHeight=$(t).height(),this.utilities.deviceView.set.call(this,this.windowWidth),this.utilities.deviceView.resize.call(this,this)},set:function(t){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i.test(navigator.userAgent),i=480>=t;e||i?(this.device="mobile",this.isMobile=!0,this.isDesktop=!1):(this.device="desktop",this.isMobile=!1,this.isDesktop=!0)},resize:function(e){this.windowWidth=$(t).width(),this.windowHeight=$(t).height(),$(t).on("resize",function(){e.utilities.deviceView.set.call(e,e.windowWidth),e.controllers.scroll.scrollOffset.update.call(e),e.controllers.scroll.stickToSection.call(e)})}},assets:{register:function(t){$.each(this.assets,function(e,i){"audio"===i.type&&t.utilities.assets.addToDOM.audio.call(t,e,i)})},addToDOM:{audio:function(t,e){var i=1==e.loop?"loop":"";return this.$elem.append('<audio id="'+t+'" src="'+e.path+'" '+i+"></audio>"),!0}}},scenes:{add:function(t){return new ScrollMagic.Scene(t).addTo(this.controllers.scrollMagic)},register:function(t){var e=this,i=t.outerHeight(),s=e.utilities.scenes.add.call(e,{triggerElement:t.selector,offset:1}),n=e.utilities.scenes.add.call(e,{triggerElement:t.selector,offset:i+1}),o=e.utilities.scenes.add.call(e,{triggerElement:t.selector,offset:2*i+1});s.on("enter",function(){t.trigger("enteringDown")}),n.on("enter",function(){t.trigger("exitingDown")}),o.on("enter",function(){t.trigger("exitedDown")}),o.on("leave",function(){t.trigger("enteringUp")}),n.on("leave",function(){t.trigger("exitingUp")}),s.on("leave",function(){t.trigger("exitedUp")})}},extendSection:function(t,e){var i={animations:{},actions:{},attributes:{},updateNav:t.defaults.options.updateNav},e=$.extend(!0,i,e);return t.setup.sections.push(e),e}}},$.Immerse={page:{setup:function(t){return new s(this).setup(t)}},section:{setup:function(t,e){return new s(this).utilities.extendSection(t,e)}},init:function(t,e){new s(this).init(t,e)}}}(jQuery,window,document);
//# sourceMappingURL=./immerse.min.js.map
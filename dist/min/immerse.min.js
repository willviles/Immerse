!function($,t,e,i){var n=function(){};n.prototype={setup:function(t){return this.setup=t,this.defaults={preload:{},options:{sectionSelector:".imm-section",transition:"default",updateNav:!0,breakpoints:{mobile:480,tablet:768,mdDesktop:992,lgDesktop:1200}},sections:[]},this.setup=$.extend(this.setup,this.defaults),this},init:function(t,e){this.elem=t,this.$elem=$(t),this.setup=e.setup,this.assets=this.setup.assets,this.sections=[];var i=this;return this.utilities.deviceView.init.call(this),this.utilities.assets.register.call(this,this),this.controllers.scrollMagic=new ScrollMagic.Controller({container:i.$elem.selector}),this.controllers.section.call(this,this),this.controllers.scroll.init.call(this,t),this},controllers:{section:function(t){var e=$(this.setup.options.sectionSelector);$.each(e,function(e,i){var n={element:$(i),updateNav:t.setup.options.updateNav,transition:t.setup.options.transition};t.sections.push(n)}),$.each(this.setup.sections,function(e,i){var n=$(i.element);$.each(t.sections,function(e,n){t.sections[e]=$(n.element)[0]===$(i.element)[0]?i:n}),t.utilities.scenes.register.call(t,n),$.each(i.animations,function(e,i){t.controllers.animation.call(t,n,e,i)}),$.each(i.actions,function(e,i){t.controllers.action.call(t,n,e,i)}),$.each(i.attributes,function(e,i){t.controllers.attribute.call(t,n,e,i)})}),$.each(this.sections,function(e,i){t.controllers.scroll.scrollOffset.set.call(t,i)}),this.sections.sort(function(t,e){return t.scrollOffset-e.scrollOffset})},animation:function(t,e,i){var n=new TimelineLite({paused:!0}),s=function(){return i.timeline(t)},o=isNaN(i.delay)?null:i.delay,l,r,c=this;null!==o&&n.set({},{},"+="+o),n.add(s),$.each(i.runtime,function(t,e){l=l+" "+e}),$.each(i.reset,function(t,e){r=r+" "+e});var a=-1!==$.inArray("mobile",i.devices),u=-1!==$.inArray("desktop",i.devices);return a&&!u&&!c.isMobile||u&&!a&&!c.isDesktop?!1:(t.on(l,function(){console.log("Running "+e),n.play()}),void t.on(r,function(){console.log("Resetting "+e),n.pause(0,!0)}))},action:function(t,e,i){var n=i.action,s=isNaN(i.delay)?0:i.delay,o,l=this;$.each(i.runtime,function(t,e){o=o+" "+e});var r=-1!==$.inArray("mobile",i.devices),c=-1!==$.inArray("desktop",i.devices);return r&&!c&&!l.isMobile||c&&!r&&!l.isDesktop?!1:void t.on(o,function(){setTimeout(function(){n.call(l,t)},s)})},attribute:function(t,e,i){var n=i.value,s=isNaN(i.delay)?0:i.delay,o,l=this;$.each(i.runtime,function(t,e){o=o+" "+e});var r=-1!==$.inArray("mobile",i.devices),c=-1!==$.inArray("desktop",i.devices);return r&&!c&&!l.isMobile||c&&!r&&!l.isDesktop?!1:void t.on(o,function(){setTimeout(function(){l.$elem.trigger(e,n)},s)})},scroll:{isScrolling:!1,canScroll:!0,init:function(e){this.scrollContainer=$($(e)[0]===$("body")[0]?t:e);var i=this;this.controllers.scroll.currentSection=this.sections[0],this.scrollContainer.scrollTop(0),this.scrollContainer.bind("mousewheel wheel DOMMouseScroll",function(t){i.controllers.scroll.handler.call(i,t)})},scrollOffset:{set:function(t){t.scrollOffset=$(t.element).offset().top},update:function(){var t=this;$.each(this.sections,function(e,i){t.controllers.scroll.scrollOffset.set.call(t,i)})}},stickySection:function(){var t=this.controllers.scroll.currentSection.scrollOffset;this.scrollContainer.scrollTop(t)},status:function(i,n){function s(e){e=e||t.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}"enable"===i?(t.removeEventListener&&t.removeEventListener("DOMMouseScroll",s,!1),t.onmousewheel=e.onmousewheel=null,t.onwheel=null,t.ontouchmove=null):"disable"===i&&(t.addEventListener&&t.addEventListener("DOMMouseScroll",s,!1),t.onwheel=s,t.onmousewheel=e.onmousewheel=s,t.ontouchmove=s)},handler:function(t){this.controllers.scroll.status("disable",t),this.controllers.scroll.isScrolling===!1&&this.controllers.scroll.canScroll===!0&&(this.controllers.scroll.isScrolling=!0,t.originalEvent.wheelDelta>=0?this.controllers.scroll.go.call(this,"UP"):this.controllers.scroll.go.call(this,"DOWN"))},go:function(t){var e,n,s=this.sections.indexOf(this.controllers.scroll.currentSection);return that=this,"UP"===t?n=this.sections[s-1]:"DOWN"===t&&(n=this.sections[s+1]),n===i?(that.controllers.scroll.isScrolling=!1,that.controllers.scroll.canScroll=!0,!1):(e=n.scrollOffset,void this.$elem.animate({scrollTop:e},500,function(){setTimeout(function(){that.controllers.scroll.currentSection=n,that.controllers.scroll.isScrolling=!1,that.controllers.scroll.canScroll=!0},1e3)}))}},audio:function(){},navigation:function(){}},utilities:{deviceView:{init:function(){this.windowWidth=$(t).width(),this.windowHeight=$(t).height(),this.utilities.deviceView.set.call(this,this.windowWidth),this.utilities.deviceView.resize.call(this,this)},set:function(t){var e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i.test(navigator.userAgent),i=480>=t;e||i?(this.device="mobile",this.isMobile=!0,this.isDesktop=!1):(this.device="desktop",this.isMobile=!1,this.isDesktop=!0)},resize:function(e){this.windowWidth=$(t).width(),this.windowHeight=$(t).height(),$(t).on("resize",function(){e.utilities.deviceView.set.call(e,e.windowWidth),e.controllers.scroll.scrollOffset.update.call(e),e.controllers.scroll.stickySection.call(e)})}},assets:{register:function(t){$.each(this.assets,function(e,i){"audio"===i.type&&t.utilities.assets.addToDOM.audio.call(t,e,i)})},addToDOM:{audio:function(t,e){var i=1==e.loop?"loop":"";return this.$elem.append('<audio id="'+t+'" src="'+e.path+'" '+i+"></audio>"),!0}}},scenes:{add:function(t){return new ScrollMagic.Scene(t).addTo(this.controllers.scrollMagic)},register:function(t){var e=this,i=t.outerHeight(),n=e.utilities.scenes.add.call(e,{triggerElement:t.selector,offset:1}),s=e.utilities.scenes.add.call(e,{triggerElement:t.selector,offset:i+1}),o=e.utilities.scenes.add.call(e,{triggerElement:t.selector,offset:2*i+1});n.on("enter",function(){t.trigger("enteringDown")}),s.on("enter",function(){t.trigger("exitingDown")}),o.on("enter",function(){t.trigger("exitedDown")}),o.on("leave",function(){t.trigger("enteringUp")}),s.on("leave",function(){t.trigger("exitingUp")}),n.on("leave",function(){t.trigger("exitedUp")})}},extendSection:function(t,e){var i={animations:{},actions:{},attributes:{},updateNav:t.defaults.options.updateNav,transition:t.defaults.options.transition},e=$.extend(!0,i,e);return t.setup.sections.push(e),e}}},$.Immerse={page:{setup:function(t){return new n(this).setup(t)}},section:{setup:function(t,e){return new n(this).utilities.extendSection(t,e)}},init:function(t,e){new n(this).init(t,e)}}}(jQuery,window,document);
//# sourceMappingURL=./immerse.min.js.map
!function($,i,t,e){var n=function(){};n.prototype={setup:function(i){return this.setup=i,this.defaults={preload:{},options:{fixedScroll:0,updateNav:!0,breakpoints:{mobile:480,tablet:768,mdDesktop:992,lgDesktop:1200}},sections:[]},this.setup=$.extend(this.defaults,this.setup),this},init:function(i,t){this.elem=i,this.$elem=$(i),this.setup=t.setup,this.assets=this.setup.assets,this.sections=this.setup.sections;var e=this;return this.utilities.deviceView.init.call(this),this.utilities.assets.register.call(this,this),this.controllers.scrollMagic=new ScrollMagic.Controller({container:e.$elem.selector}),this.controllers.scroll.init.call(this,i),this.controllers.section.call(this,this),this},controllers:{section:function(i){this.$elem.on("scroll",function(){var t=i.controllers.scrollMagic.scrollPos()}),$.each(this.sections,function(t,e){var n=$(e.element);i.utilities.scenes.register.call(i,n),$.each(e.animations,function(t,e){i.controllers.animation.call(i,n,t,e)}),$.each(e.actions,function(t,e){i.controllers.action.call(i,n,t,e)}),$.each(e.attributes,function(t,e){i.controllers.attribute.call(i,n,t,e)})})},animation:function(i,t,e){var n=new TimelineLite({paused:!0}),s=function(){return e.timeline(i)},o=isNaN(e.delay)?null:e.delay,l,r,c=this;null!==o&&n.set({},{},"+="+o),n.add(s),$.each(e.runtime,function(i,t){l=l+" "+t}),$.each(e.reset,function(i,t){r=r+" "+t});var a=-1!==$.inArray("mobile",e.devices),u=-1!==$.inArray("desktop",e.devices);return a&&!u&&!c.isMobile||u&&!a&&!c.isDesktop?!1:(i.on(l,function(){console.log("Running "+t),n.play()}),void i.on(r,function(){console.log("Resetting "+t),n.pause(0,!0)}))},action:function(i,t,e){var n=e.action,s=isNaN(e.delay)?0:e.delay,o,l=this;$.each(e.runtime,function(i,t){o=o+" "+t});var r=-1!==$.inArray("mobile",e.devices),c=-1!==$.inArray("desktop",e.devices);return r&&!c&&!l.isMobile||c&&!r&&!l.isDesktop?!1:void i.on(o,function(){setTimeout(function(){n.call(l,i)},s)})},attribute:function(i,t,e){var n=e.value,s=isNaN(e.delay)?0:e.delay,o,l=this;$.each(e.runtime,function(i,t){o=o+" "+t});var r=-1!==$.inArray("mobile",e.devices),c=-1!==$.inArray("desktop",e.devices);return r&&!c&&!l.isMobile||c&&!r&&!l.isDesktop?!1:void i.on(o,function(){setTimeout(function(){l.$elem.trigger(t,n)},s)})},scroll:{canScroll:!0,init:function(t){this.scrollContainer=$($(t)[0]===$("body")[0]?i:t);var e=this},go:function(i,t){var e,n=this;"REVERSE"===i?e="-=500px":"FORWARD"===i&&(e="+=500px"),$(t).animate({scrollTop:e},500,function(){setTimeout(function(){n.controllers.scroll.canScroll=!0},1e3)})}},audio:function(){},navigation:function(){}},utilities:{deviceView:{init:function(){this.windowWidth=$(i).width(),this.windowHeight=$(i).height(),this.utilities.deviceView.set.call(this,this.windowWidth),this.utilities.deviceView.resize.call(this,this)},set:function(i){var t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|OperaMini/i.test(navigator.userAgent),e=480>=i;t||e?(this.device="mobile",this.isMobile=!0,this.isDesktop=!1):(this.device="desktop",this.isMobile=!1,this.isDesktop=!0)},resize:function(t){this.windowWidth=$(i).width(),this.windowHeight=$(i).height(),$(i).on("resize",function(){t.utilities.deviceView.set(t,t.windowWidth)})}},assets:{register:function(i){$.each(this.assets,function(t,e){"audio"===e.type&&i.utilities.assets.addToDOM.audio.call(i,t,e)})},addToDOM:{audio:function(i,t){var e=1==t.loop?"loop":"";return this.$elem.append('<audio id="'+i+'" src="'+t.path+'" '+e+"></audio>"),!0}}},scenes:{add:function(i){return new ScrollMagic.Scene(i).addTo(this.controllers.scrollMagic)},register:function(i){var t=this,e=i.outerHeight(),n=t.utilities.scenes.add.call(t,{triggerElement:i.selector,offset:1}),s=t.utilities.scenes.add.call(t,{triggerElement:i.selector,offset:e+1}),o=t.utilities.scenes.add.call(t,{triggerElement:i.selector,offset:2*e+1});n.on("enter",function(){i.trigger("enteringDown")}),s.on("enter",function(){i.trigger("exitingDown")}),o.on("enter",function(){i.trigger("exitedDown")}),o.on("leave",function(){i.trigger("enteringUp")}),s.on("leave",function(){i.trigger("exitingUp")}),n.on("leave",function(){i.trigger("exitedUp")})}},extendSection:function(i,t){var e={animations:{},actions:{},attributes:{},fixedScroll:i.defaults.options.fixedScroll,updateNav:i.defaults.options.updateNav},t=$.extend(!0,e,t);return i.setup.sections.push(t),t}}},$.Immerse={page:{setup:function(i){return new n(this).setup(i)}},section:{setup:function(i,t){return new n(this).utilities.extendSection(i,t)}},init:function(i,t){new n(this).init(i,t)}}}(jQuery,window,document);
//# sourceMappingURL=./immerse.min.js.map